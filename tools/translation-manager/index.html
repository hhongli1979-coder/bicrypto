<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .progress-ring { transform: rotate(-90deg); }
        .progress-ring__circle { stroke-dasharray: 251.2; stroke-dashoffset: 251.2; transition: stroke-dashoffset 0.35s; }
        .diff-added { background-color: #d4edda; color: #155724; }
        .diff-removed { background-color: #f8d7da; color: #721c24; }
        .sidebar-item { transition: all 0.2s ease; }
        .sidebar-item:hover { background-color: rgba(255,255,255,0.1); }
        .sidebar-item.active { background-color: rgba(255,255,255,0.2); border-left: 4px solid #fff; }

        /* Virtual scrolling styles */
        .virtual-scroll-container::-webkit-scrollbar { width: 8px; }
        .virtual-scroll-container::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        .virtual-scroll-container::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        .virtual-scroll-container::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Responsive improvements */
        html, body { overflow-x: hidden; max-width: 100vw; }
        main { min-width: 0; width: 100%; }
        .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .tab-content { max-width: 100%; overflow-x: hidden; }
        .flex-col.h-screen { display: flex; flex-direction: column; height: 100vh; }

        @media (max-width: 768px) {
            .overflow-x-auto { margin-left: -1rem; margin-right: -1rem; padding-left: 1rem; padding-right: 1rem; }
            table { min-width: 100%; }
            .p-6 { padding: 1rem; }
            #sidebar { width: 16rem !important; min-width: 16rem !important; max-width: 16rem !important; }
        }

        @media (min-width: 1024px) {
            #sidebar { position: relative; flex-shrink: 0; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex flex-col h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg flex-shrink-0 relative z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-language text-2xl"></i>
                    <h1 class="text-2xl font-bold">Translation Management System</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm opacity-90">Total Locales: <span id="total-locales">--</span></span>
                    <span class="text-sm opacity-90">Total Keys: <span id="total-keys">--</span></span>
                    <button id="refresh-btn" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="fixed top-4 left-4 z-50 lg:hidden bg-white p-2 rounded-lg shadow-lg">
            <i class="fas fa-bars text-gray-700"></i>
        </button>
        
        <!-- Sidebar -->
        <nav id="sidebar" class="w-64 min-w-[16rem] max-w-[16rem] gradient-bg text-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40 overflow-y-auto lg:relative lg:transform-none absolute top-0 left-0 h-full">
            <div class="p-6">
                <div class="flex justify-end items-center mb-4 lg:hidden">
                    <button id="close-sidebar">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <ul class="space-y-2">
                    <!-- Overview -->
                    <li><a href="#" class="sidebar-item active block p-3 rounded-lg" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt mr-3"></i> Dashboard
                    </a></li>

                    <!-- Extraction Tools -->
                    <li class="pt-4 pb-1 text-xs uppercase tracking-wider text-gray-400 px-3">Extraction</li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="extract-text">
                        <i class="fas fa-file-alt mr-3"></i> Extract Text
                    </a></li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="extract-menu">
                        <i class="fas fa-bars mr-3"></i> Extract Menu
                    </a></li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="sync-translations">
                        <i class="fas fa-sync-alt mr-3"></i> Sync Translations
                    </a></li>

                    <!-- Translation -->
                    <li class="pt-4 pb-1 text-xs uppercase tracking-wider text-gray-400 px-3">Translation</li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="ai-translate">
                        <i class="fas fa-robot mr-3"></i> AI Translation
                    </a></li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="untranslatable">
                        <i class="fas fa-ban mr-3"></i> Untranslatable
                    </a></li>

                    <!-- Cleanup -->
                    <li class="pt-4 pb-1 text-xs uppercase tracking-wider text-gray-400 px-3">Cleanup</li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="orphaned">
                        <i class="fas fa-unlink mr-3"></i> Orphaned Keys
                    </a></li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="jsx-cleanup">
                        <i class="fas fa-code mr-3"></i> JSX Cleanup
                    </a></li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="optimize-namespaces">
                        <i class="fas fa-sitemap mr-3"></i> Optimize Namespaces
                    </a></li>
                    <li><a href="#" class="sidebar-item block p-3 rounded-lg" data-page="optimize-keys">
                        <i class="fas fa-key mr-3"></i> Optimize Keys
                    </a></li>
                </ul>
            </div>
        </nav>
        
        <!-- Overlay for mobile -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden"></div>

        <!-- Main Content -->
        <main class="flex-1 p-4 lg:p-6 overflow-y-auto overflow-x-hidden">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" data-tab="dashboard" class="tab-content">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-8">
                    <!-- Stats Cards -->
                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-500 text-white">
                                <i class="fas fa-globe text-2xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700">Total Locales</h3>
                                <p class="text-3xl font-bold text-blue-600" id="dashboard-locales">--</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-500 text-white">
                                <i class="fas fa-check-circle text-2xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700">Translated Keys</h3>
                                <p class="text-3xl font-bold text-green-600" id="dashboard-translated">--</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-red-500 text-white">
                                <i class="fas fa-exclamation-triangle text-2xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700">Missing Translations</h3>
                                <p class="text-3xl font-bold text-red-600" id="dashboard-missing">--</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Translation Progress by Locale -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Translation Progress by Locale</h2>
                    <div id="locale-progress-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Progress cards will be populated here -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Quick Actions</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <a href="#" data-page="ai-translate" class="block p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-all cursor-pointer">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-500 text-white">
                                    <i class="fas fa-robot text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">AI Translation</h3>
                                    <p class="text-sm text-gray-600">Translate with Claude Code</p>
                                </div>
                            </div>
                        </a>
                        <a href="#" data-page="orphaned" class="block p-4 bg-red-50 hover:bg-red-100 rounded-lg transition-all cursor-pointer">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-red-500 text-white">
                                    <i class="fas fa-unlink text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">Orphaned Translations</h3>
                                    <p class="text-sm text-gray-600">Find keys used in TSX but missing in messages</p>
                                </div>
                            </div>
                        </a>
                        <a href="#" data-page="jsx-cleanup" class="block p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all cursor-pointer">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-500 text-white">
                                    <i class="fas fa-code text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">JSX Cleanup</h3>
                                    <p class="text-sm text-gray-600">Remove unnecessary JSX wrappers</p>
                                </div>
                            </div>
                        </a>
                        <a href="#" data-page="optimize-namespaces" class="block p-4 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-all cursor-pointer">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-indigo-500 text-white">
                                    <i class="fas fa-sitemap text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">Optimize Namespaces</h3>
                                    <p class="text-sm text-gray-600">Consolidate duplicate keys across namespaces</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Recent Translation Activity</h2>
                    <div id="recent-activity" class="space-y-4">
                        <!-- Activity items will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Progress Tracker Tab -->

            <!-- Page Container (for standalone pages) -->
            <div id="page-container" class="hidden">
                <div id="page-content">
                    <!-- Page content will be rendered here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2 pointer-events-none"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 hidden">
        <div class="bg-white rounded-lg p-8 text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"></div>
            <p class="text-gray-700">Processing...</p>
        </div>
    </div>

    <!-- Load utility and service files first -->
    <script src="client/utils/initialization-guard.js"></script>
    <script src="client/utils/ui-utils.js"></script>
    <script src="client/services/websocket-client.js"></script>
    <script src="client/services/api-client.js"></script>
    <script src="client/services/router.js"></script>
    <script src="client/services/page-router.js"></script>

    <!-- Load page files -->
    <script src="client/pages/extract-text.page.js"></script>
    <script src="client/pages/extract-menu.page.js"></script>
    <script src="client/pages/sync-translations.page.js"></script>
    <script src="client/pages/ai-translate.page.js"></script>
    <script src="client/pages/untranslatable.page.js"></script>
    <script src="client/pages/orphaned.page.js"></script>
    <script src="client/pages/jsx-cleanup.page.js"></script>
    <script src="client/pages/optimize-namespaces.page.js"></script>
    <script src="client/pages/optimize-keys.page.js"></script>

    <!-- Load component files -->
    <script src="client/components/dashboard.js"></script>
    <script src="client/components/progress-tracker.js"></script>
    
    <!-- Load tab files -->
    <script src="client/components/tabs/simple-tabs.js"></script>
    <script src="client/components/tabs/dashboard.tab.js"></script>
    <script src="client/components/tabs/locales.tab.js"></script>
    <script src="client/components/tabs/translation-editor.tab.js"></script>
    <script src="client/components/tabs/ai-translate.tab.js"></script>
    <script src="client/components/tabs/untranslatable.tab.js"></script>
    <script src="client/components/tabs/comparison.tab.js"></script>
    <script src="client/components/tabs/orphaned.tab.js"></script>
    <script src="client/components/tabs/jsx-cleanup.tab.js"></script>

    <!-- Load main app file last -->
    <script src="app.js"></script>
    </div>
</body>
</html>